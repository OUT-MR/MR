<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BUILD A PLATE</title>
  <style>
    :root{
      --bg:#F6F2EA;
      --ink:#0B0F0D;
      --muted:rgba(11,15,13,.62);
      --line:rgba(11,15,13,.12);
      --card:#FFFFFF;
      --accent:#0F2A22;

      --radius:16px;
      --max:1280px;

      --headerH:58px;
      --chipBg:rgba(255,255,255,.70);
      --chipBd:rgba(11,15,13,.14);

      --shadow: 0 12px 40px rgba(11,15,13,.10);
      --shadow2: 0 18px 60px rgba(11,15,13,.14);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
      background:var(--bg);
      color:var(--ink);
      -webkit-font-smoothing: antialiased;
    }
    a{color:inherit;text-decoration:none}
    button{font-family:inherit}
    .wrap{max-width:var(--max); margin:0 auto; padding:0 18px 80px}

    /* ===== Header ===== */
    .header{
      position:sticky; top:0; z-index:50;
      height:var(--headerH);
      display:flex; align-items:center; justify-content:space-between;
      padding:0 16px;
      background:rgba(246,242,234,.92);
      border-bottom:1px solid var(--line);
      backdrop-filter: blur(12px);
    }
    .hleft,.hright{display:flex; align-items:center; gap:12px; min-width:240px}
    .hcenter{flex:1; display:flex; align-items:center; justify-content:center}
    .logo{
      letter-spacing:.28em;
      font-weight:760;
      font-size:12px;
      text-transform:uppercase;
    }
    .iconBtn{
      width:38px;height:38px;border:0;background:transparent;color:inherit;cursor:pointer;border-radius:999px;
      display:inline-flex;align-items:center;justify-content:center;
    }
    .iconBtn:hover{background:rgba(11,15,13,.06)}
    .iconWrap{position:relative; display:inline-flex}
    .badge{
      position:absolute; right:-3px; top:-3px;
      background:var(--accent); color:#fff; font-size:11px; padding:2px 6px; border-radius:999px;
      border:2px solid rgba(246,242,234,.92);
      min-width:18px; text-align:center;
    }
    .topLink{
      font-size:12px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:rgba(11,15,13,.72);
      padding:8px 10px;
      border-radius:999px;
    }
    .topLink:hover{background:rgba(11,15,13,.06)}

    /* ===== Hero ===== */
    .hero{
      position:relative;
      border-radius:22px;
      overflow:hidden;
      margin-top:14px;
      height:min(68vh, 640px);
      background:#0b0f0d;
      box-shadow: var(--shadow);
    }
    .heroMedia{
      position:absolute; inset:0;
      background: radial-gradient(1200px 500px at 30% 30%, rgba(255,255,255,.10), rgba(0,0,0,.55)),
                  linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.62));
    }
    .heroInner{
      position:relative;
      height:100%;
      display:flex;
      align-items:flex-end;
      padding:26px;
    }
    .heroKicker{
      font-size:11px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(255,255,255,.75);
      margin:0 0 10px;
    }
    .heroTitle{
      margin:0;
      font-size:44px;
      line-height:1.02;
      letter-spacing:-.02em;
      color:#fff;
      max-width:740px;
    }
    .heroSub{
      margin:10px 0 0;
      font-size:13px;
      color:rgba(255,255,255,.78);
      max-width:620px;
    }
    .heroActions{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:16px;
    }
    .btn{
      border-radius:999px;
      padding:10px 14px;
      font-weight:680;
      font-size:13px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.10);
      color:#fff;
      cursor:pointer;
      backdrop-filter: blur(10px);
    }
    .btn:hover{background:rgba(255,255,255,.14)}
    .btn.primary{
      background:#fff;
      border-color:#fff;
      color:#0B0F0D;
    }

    /* ===== Section header ===== */
    .sectionTop{
      display:flex; align-items:flex-end; justify-content:space-between;
      margin:18px 0 10px;
      gap:12px;
    }
    .sectionTitle{
      margin:0;
      font-size:12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(11,15,13,.75);
    }
    .count{
      font-size:12px;
      color:var(--muted);
    }

    /* ===== Quick chips (top filter row) ===== */
    .chips{
      display:flex; flex-wrap:wrap; gap:8px;
      padding:10px 0 12px;
      border-top:1px solid var(--line);
    }
    .chip{
      border:1px solid var(--chipBd);
      background:var(--chipBg);
      padding:8px 12px;
      border-radius:999px;
      font-size:12px;
      cursor:pointer;
      user-select:none;
    }
    .chip.active{
      background:rgba(11,15,13,.90);
      color:#fff;
      border-color:rgba(11,15,13,.90);
    }

    /* ===== Grid cards ===== */
    .grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
    }
    .card{
      border:1px solid var(--line);
      border-radius:18px;
      overflow:hidden;
      background:#fff;
      box-shadow: 0 10px 34px rgba(11,15,13,.06);
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .card:hover{
      transform: translateY(-2px);
      box-shadow: var(--shadow2);
    }
    .cardMedia{
      height:260px;
      background:#ddd;
      position:relative;
      overflow:hidden;
    }
    .cardMedia::before{
      content:"";
      position:absolute; inset:0;
      background-image:url("assets/plate-bg.png");
      background-size:cover;
      background-position:center;
      filter:saturate(.98) contrast(1.02);
    }
    .dishImg{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:contain;
      padding:22px;
      filter: drop-shadow(0 16px 18px rgba(0,0,0,.22));
    }
    .cardBottom{
      padding:12px 12px 14px;
      background:rgba(246,242,234,.55);
      border-top:1px solid rgba(11,15,13,.08);
    }
    .cat{
      font-size:11px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:rgba(11,15,13,.60);
      margin:0 0 6px;
    }
    .name{
      margin:0;
      font-size:14px;
      font-weight:720;
      letter-spacing:-.01em;
    }
    .meta{
      margin:6px 0 0;
      font-size:12px;
      color:rgba(11,15,13,.62);
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .dot{opacity:.55}

    /* ===== LV-like overlays (Search, Menu, Bag) ===== */
    .overlay{
      position:fixed;
      inset:0;
      background:rgba(11,15,13,.55);
      display:none;
      z-index:80;
    }
    .overlay.open{display:block}

    /* Search overlay – LV style */
    .searchPanel{
      position:absolute; inset:0;
      background:#fff;
      overflow:auto;
    }
    .searchTop{
      position:sticky; top:0; z-index:5;
      background:#fff;
      border-bottom:1px solid rgba(11,15,13,.10);
    }
    .searchTopInner{
      max-width:var(--max);
      margin:0 auto;
      padding:18px 18px 14px;
      position:relative;
    }
    .searchClose{
      position:absolute; right:12px; top:12px;
      width:42px; height:42px;
      border-radius:999px;
      border:1px solid rgba(11,15,13,.12);
      background:#fff;
      cursor:pointer;
      font-size:18px;
    }
    .searchBrand{
      display:flex; justify-content:center;
      font-weight:820;
      letter-spacing:.30em;
      text-transform:uppercase;
      font-size:13px;
      margin:2px 0 14px;
    }
    .searchBarWrap{
      display:flex; justify-content:center;
      margin-bottom:10px;
    }
    .searchBar{
      width:min(860px, 100%);
      border:1px solid rgba(11,15,13,.16);
      border-radius:999px;
      padding:14px 16px;
      font-size:14px;
      outline:none;
    }
    .trendRow{
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
      padding:6px 0 2px;
    }
    .trendLabel{
      font-size:10px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(11,15,13,.55);
      padding-top:2px;
    }
    .trend{
      font-size:12px;
      color:rgba(11,15,13,.70);
      cursor:pointer;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(11,15,13,.12);
      background:rgba(246,242,234,.65);
    }
    .trend:hover{background:rgba(246,242,234,.95)}

    .searchBody{
      max-width:var(--max);
      margin:0 auto;
      padding:18px;
    }
    .searchSection{
      margin:6px 0 10px;
      font-size:12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(11,15,13,.70);
    }
    .searchGrid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:12px;
    }
    .sCard{
      border:1px solid rgba(11,15,13,.10);
      border-radius:18px;
      overflow:hidden;
      background:#fff;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease;
      box-shadow: 0 10px 34px rgba(11,15,13,.06);
    }
    .sCard:hover{transform: translateY(-2px); box-shadow: var(--shadow2)}
    .sMedia{
      height:280px;
      position:relative;
      background:#ddd;
    }
    .sMedia::before{
      content:"";
      position:absolute; inset:0;
      background-image:url("assets/plate-bg.png");
      background-size:cover;
      background-position:center;
    }
    .sImg{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:contain;
      padding:24px;
      filter: drop-shadow(0 16px 18px rgba(0,0,0,.22));
    }
    .sBottom{
      padding:12px 12px 14px;
      background:rgba(246,242,234,.55);
      border-top:1px solid rgba(11,15,13,.08);
    }
    .sName{margin:0; font-size:14px; font-weight:720}
    .sMeta{margin:6px 0 0; font-size:12px; color:rgba(11,15,13,.62)}

    /* Menu drawer (left) */
    .drawer{
      position:absolute;
      top:0; left:0;
      width:min(420px, 92vw);
      height:100%;
      background:rgba(246,242,234,.98);
      border-right:1px solid var(--line);
      padding:16px;
      overflow:auto;
      box-shadow: 30px 0 80px rgba(0,0,0,.22);
    }
    .drawerTop{
      display:flex; align-items:center; justify-content:space-between;
      padding:6px 0 12px;
      border-bottom:1px solid var(--line);
      margin-bottom:12px;
    }
    .drawerTitle{
      font-size:12px; letter-spacing:.22em; text-transform:uppercase;
    }
    .x{
      width:38px; height:38px;
      border-radius:999px;
      border:1px solid var(--line);
      background:transparent;
      cursor:pointer;
      font-size:16px;
    }
    .drawerBlock{margin:14px 0}
    .drawerLabel{
      font-size:11px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(11,15,13,.60);
      margin:0 0 8px;
    }
    .optGrid{display:flex; flex-wrap:wrap; gap:8px}
    .opt{
      border:1px solid rgba(11,15,13,.14);
      background:rgba(255,255,255,.65);
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      cursor:pointer;
      user-select:none;
    }
    .opt.active{
      background:rgba(11,15,13,.90);
      border-color:rgba(11,15,13,.90);
      color:#fff;
    }
    .smallNote{
      font-size:12px;
      color:rgba(11,15,13,.55);
      margin-top:10px;
      line-height:1.35;
    }

    /* Bag overlay (right) */
    .sheet{
      position:absolute; top:0; right:0;
      width:min(520px, 100%);
      height:100%;
      background:rgba(246,242,234,.98);
      border-left:1px solid var(--line);
      padding:16px;
      overflow:auto;
    }
    .sheetTop{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      padding:6px 0 12px;
      border-bottom:1px solid var(--line);
      margin-bottom:12px;
    }
    .list{display:flex; flex-direction:column; gap:10px}
    .rowItem{
      display:flex;
      gap:10px;
      align-items:center;
      padding:10px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.65);
      cursor:pointer;
    }
    .thumb{
      width:62px; height:62px;
      border-radius:14px;
      overflow:hidden;
      position:relative;
      flex:none;
      background:#ddd;
    }
    .thumb::before{
      content:"";
      position:absolute; inset:0;
      background-image:url("assets/plate-bg.png");
      background-size:cover;
      background-position:center;
    }
    .thumb img{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:contain;
      padding:10px;
      filter: drop-shadow(0 10px 10px rgba(0,0,0,.18));
    }
    .rowItem b{font-size:13px}
    .rowItem span{font-size:12px;color:var(--muted)}
    .muted{color:var(--muted); font-size:13px; margin:10px 0 0}

    /* ===== Footer ===== */
    footer{
      margin-top:26px;
      border-top:1px solid var(--line);
      padding:22px 0 0;
      color:rgba(11,15,13,.70);
    }
    .footGrid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:14px;
    }
    .footTitle{
      font-size:11px;
      letter-spacing:.22em;
      text-transform:uppercase;
      margin:0 0 10px;
      color:rgba(11,15,13,.70);
    }
    .footLink{
      display:block;
      padding:6px 0;
      font-size:13px;
      color:rgba(11,15,13,.70);
    }
    .footLink:hover{color:#0B0F0D}
    .footBottom{
      margin-top:16px;
      padding:14px 0 0;
      border-top:1px solid var(--line);
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      font-size:12px;
      color:rgba(11,15,13,.55);
    }

    @media (max-width: 1200px){
      .grid, .searchGrid{grid-template-columns: repeat(3, 1fr)}
      .cardMedia{height:240px}
      .sMedia{height:260px}
    }
    @media (max-width: 860px){
      .hleft,.hright{min-width:auto}
      .grid, .searchGrid{grid-template-columns: repeat(2, 1fr)}
      .heroTitle{font-size:34px}
      .cardMedia{height:230px}
      .sMedia{height:240px}
      .footGrid{grid-template-columns: repeat(2, 1fr)}
    }
    @media (max-width: 520px){
      .grid, .searchGrid{grid-template-columns: 1fr}
      .hero{height:min(72vh, 620px)}
      .heroTitle{font-size:30px}
    }
  </style>
</head>
<body>

  <!-- ===== Header ===== -->
  <header class="header">
    <div class="hleft">
      <button class="iconBtn" id="menuBtn" aria-label="Menu">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>

      <button class="iconBtn" id="searchBtn" aria-label="Search">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2"/>
          <path d="M16.5 16.5 21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    <div class="hcenter">
      <div class="logo">BUILD A PLATE</div>
    </div>

    <div class="hright" style="justify-content:flex-end">
      <a class="topLink" href="contact.html">Contact us</a>

      <button class="iconBtn" id="loginBtn" aria-label="Login">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Z" stroke="currentColor" stroke-width="2"/>
          <path d="M20 21a8 8 0 1 0-16 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>

      <span class="iconWrap">
        <button class="iconBtn" id="bagBtn" aria-label="Bag">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M6 8h12l-1 13H7L6 8Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            <path d="M9 8a3 3 0 0 1 6 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
        <span class="badge" id="bagCount" style="display:none">0</span>
      </span>
    </div>
  </header>

  <div class="wrap">

    <!-- ===== Hero ===== -->
    <section class="hero" aria-label="Hero">
      <div class="heroMedia"></div>
      <div class="heroInner">
        <div>
          <p class="heroKicker">VÄSTMANLANDS LÄN</p>
          <h1 class="heroTitle">Bygg rätten. Tillsammans.</h1>
          <p class="heroSub">Välj en rätt. Välj Duo, Par, Trio, Squad eller Plato Mode. Premium känsla. Enkelt flöde.</p>
          <div class="heroActions">
            <button class="btn primary" id="scrollToDishes">Se rätter</button>
            <button class="btn" id="openSearchFromHero">Sök</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== Dishes ===== -->
    <div class="sectionTop" id="dishesTop">
      <h2 class="sectionTitle">Rätter</h2>
      <div class="count" id="countLine">0 rätter</div>
    </div>

    <div class="chips" id="chipRow"></div>

    <div class="grid" id="grid"></div>

    <!-- ===== Footer ===== -->
    <footer>
      <div class="footGrid">
        <div>
          <p class="footTitle">Need help</p>
          <a class="footLink" href="help.html">Help Center</a>
          <a class="footLink" href="help.html#faq">FAQ</a>
          <a class="footLink" href="help.html#delivery">Delivery</a>
          <a class="footLink" href="help.html#payment">Payment</a>
        </div>
        <div>
          <p class="footTitle">Care</p>
          <a class="footLink" href="contact.html">Contact us</a>
          <a class="footLink" href="contact.html#instagram">Instagram</a>
          <a class="footLink" href="help.html#allergens">Allergens</a>
          <a class="footLink" href="help.html#terms">Terms</a>
        </div>
        <div>
          <p class="footTitle">Build a plate</p>
          <a class="footLink" href="index.html">Home</a>
          <a class="footLink" href="index.html#dishesTop">Dishes</a>
          <a class="footLink" href="login.html">Login</a>
          <a class="footLink" href="contact.html">Contact</a>
        </div>
        <div>
          <p class="footTitle">Region</p>
          <a class="footLink" href="help.html#region">Västmanlands län</a>
          <a class="footLink" href="help.html#hours">Opening hours</a>
          <a class="footLink" href="help.html#returns">Returns</a>
          <a class="footLink" href="help.html#privacy">Privacy</a>
        </div>
      </div>

      <div class="footBottom">
        <div>© BUILD A PLATE</div>
        <div>Premium experience. Simple flow.</div>
      </div>
    </footer>

  </div>

  <!-- ===== MENU DRAWER OVERLAY ===== -->
  <div class="overlay" id="menuOverlay" aria-hidden="true">
    <div class="drawer" role="dialog" aria-label="Menu">
      <div class="drawerTop">
        <div class="drawerTitle">Menu</div>
        <button class="x" id="menuClose" aria-label="Close">✕</button>
      </div>

      <div class="drawerBlock">
        <p class="drawerLabel">Kategori</p>
        <div class="optGrid" id="menuCats"></div>
      </div>

      <div class="drawerBlock">
        <p class="drawerLabel">Diet</p>
        <div class="optGrid" id="menuDiet"></div>
      </div>

      <div class="drawerBlock">
        <p class="drawerLabel">Occasion</p>
        <div class="optGrid" id="menuOccasion"></div>
      </div>

      <div class="drawerBlock">
        <p class="drawerLabel">Prep time</p>
        <div class="optGrid" id="menuTime"></div>
      </div>

      <div class="drawerBlock">
        <p class="drawerLabel">Spice level</p>
        <div class="optGrid" id="menuSpice"></div>
      </div>

      <div class="drawerBlock">
        <p class="drawerLabel">Sort</p>
        <div class="optGrid" id="menuSort"></div>
      </div>

      <div class="drawerBlock">
        <p class="drawerLabel">Quick links</p>
        <div class="optGrid">
          <a class="opt" href="contact.html">Contact us</a>
          <a class="opt" href="help.html">Help Center</a>
          <a class="opt" href="login.html">Login</a>
        </div>
        <div class="smallNote">Leverans i Västmanlands län. Premium flöde. Inga priser i listan.</div>
      </div>
    </div>
  </div>

  <!-- ===== SEARCH OVERLAY (LV STYLE) ===== -->
  <div class="overlay" id="searchOverlay" aria-hidden="true">
    <div class="searchPanel" role="dialog" aria-label="Search">
      <div class="searchTop">
        <div class="searchTopInner">
          <button class="searchClose" id="searchClose" aria-label="Close">✕</button>

          <div class="searchBrand">BUILD A PLATE</div>

          <div class="searchBarWrap">
            <input class="searchBar" id="q" type="search" placeholder="Sök rätt, kategori eller tagg..." autocomplete="off" />
          </div>

          <div class="trendRow">
            <div class="trendLabel">Trending searches</div>
            <div class="trend" data-q="Premium">premium</div>
            <div class="trend" data-q="Pasta">pasta</div>
            <div class="trend" data-q="Sushi">sushi</div>
            <div class="trend" data-q="Nordic">nordic</div>
            <div class="trend" data-q="Veg">veg</div>
            <div class="trend" data-q="15 min">15 min</div>
            <div class="trend" data-q="Date night">date night</div>
          </div>
        </div>
      </div>

      <div class="searchBody">
        <div class="searchSection" id="searchCount">0 results</div>
        <div class="searchGrid" id="searchGrid"></div>
      </div>
    </div>
  </div>

  <!-- ===== BAG OVERLAY ===== -->
  <div class="overlay" id="bagOverlay" aria-hidden="true">
    <div class="sheet" role="dialog" aria-label="Bag">
      <div class="sheetTop">
        <b style="letter-spacing:.14em;text-transform:uppercase;font-size:12px">Bag</b>
        <button class="x" id="bagClose" aria-label="Close">✕</button>
      </div>

      <div class="muted" id="bagEmpty">Din bag är tom.</div>
      <div class="list" id="bagList"></div>
      <p class="muted" style="margin-top:14px">Klicka en item för att öppna produkten.</p>
    </div>
  </div>

  <script>
    // =========================
    // Data (40 rätter – placeholder)
    // Byt "img" till dina riktiga dish-bilder senare.
    // =========================

    const DISHES = [
      // Pasta
      { id:"truffle", name:"Tagliatelle al Tartufo", cat:"Pasta", diet:["Premium"], time:"25 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"cacio", name:"Cacio e Pepe", cat:"Pasta", diet:["Classic"], time:"20 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"vodka", name:"Vodka Pasta + burrata", cat:"Pasta", diet:["Premium"], time:"25 min", spice:"Medium", occasion:["Date night"], img:"assets/dish-placeholder.png" },
      { id:"ragu", name:"Ragu Bianco", cat:"Pasta", diet:["Classic"], time:"35 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"pesto", name:"Pesto Genovese Bowl", cat:"Pasta", diet:["Veg"], time:"15 min", spice:"Mild", occasion:["Lunch"], img:"assets/dish-placeholder.png" },
      { id:"arrabbiata", name:"Arrabbiata Rosso", cat:"Pasta", diet:["Spicy"], time:"20 min", spice:"Hot", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"lasagna", name:"Lasagna Bianca", cat:"Pasta", diet:["Premium"], time:"40 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"carbonara", name:"Carbonara Classica", cat:"Pasta", diet:["Classic"], time:"20 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },

      // Nordic
      { id:"meatballs", name:"Köttbullar 2.0", cat:"Nordic", diet:["Classic"], time:"35 min", spice:"Mild", occasion:["Family"], img:"assets/dish-placeholder.png" },
      { id:"steak", name:"Biff + chimichurri", cat:"Nordic", diet:["Premium"], time:"30 min", spice:"Medium", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"salmon", name:"Lax + misosmör", cat:"Nordic", diet:["Premium"], time:"25 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"cod", name:"Torsk + brynt smör", cat:"Nordic", diet:["Classic"], time:"25 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"reindeer", name:"Renkavla Deluxe", cat:"Nordic", diet:["Premium"], time:"30 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"chicken", name:"Kyckling + dragon", cat:"Nordic", diet:["Classic"], time:"25 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"shrimp", name:"Räkor + aioli", cat:"Nordic", diet:["Classic"], time:"15 min", spice:"Mild", occasion:["Lunch"], img:"assets/dish-placeholder.png" },
      { id:"potato", name:"Potatisgratäng + rosmarin", cat:"Nordic", diet:["Veg"], time:"35 min", spice:"Mild", occasion:["Family"], img:"assets/dish-placeholder.png" },

      // Sushi
      { id:"temaki", name:"Temaki Kit (tillagat protein)", cat:"Sushi", diet:["Premium"], time:"20 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"poke", name:"Poke Bowl", cat:"Sushi", diet:["Classic"], time:"15 min", spice:"Mild", occasion:["Lunch"], img:"assets/dish-placeholder.png" },
      { id:"sashimi", name:"Sashimi Selection", cat:"Sushi", diet:["Premium"], time:"15 min", spice:"Mild", occasion:["Date night"], img:"assets/dish-placeholder.png" },
      { id:"maki", name:"Maki Mix", cat:"Sushi", diet:["Classic"], time:"20 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"spicytuna", name:"Spicy Tuna Bowl", cat:"Sushi", diet:["Spicy"], time:"15 min", spice:"Hot", occasion:["Lunch"], img:"assets/dish-placeholder.png" },
      { id:"salmonroll", name:"Salmon Roll Kit", cat:"Sushi", diet:["Classic"], time:"20 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"crispy", name:"Crispy Rice + Salmon", cat:"Sushi", diet:["Premium"], time:"25 min", spice:"Medium", occasion:["Date night"], img:"assets/dish-placeholder.png" },
      { id:"vegsushi", name:"Veg Sushi Set", cat:"Sushi", diet:["Veg"], time:"20 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },

      // Veg
      { id:"halloumi", name:"Halloumi bowl + chimichurri", cat:"Veg", diet:["Veg"], time:"15 min", spice:"Mild", occasion:["Lunch"], img:"assets/dish-placeholder.png" },
      { id:"misoeggplant", name:"Miso Eggplant", cat:"Veg", diet:["Veg","Premium"], time:"25 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"cauliflower", name:"Roasted Cauliflower + tahini", cat:"Veg", diet:["Veg"], time:"25 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"mushroom", name:"Mushroom Butter Rice", cat:"Veg", diet:["Veg","Premium"], time:"20 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"lentil", name:"Lentil Ragu", cat:"Veg", diet:["Veg"], time:"30 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"greek", name:"Greek Bowl", cat:"Veg", diet:["Veg"], time:"15 min", spice:"Mild", occasion:["Lunch"], img:"assets/dish-placeholder.png" },
      { id:"tofu", name:"Crispy Tofu + sesame", cat:"Veg", diet:["Veg"], time:"20 min", spice:"Medium", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"risotto", name:"Mushroom Risotto", cat:"Veg", diet:["Veg","Premium"], time:"35 min", spice:"Mild", occasion:["Date night"], img:"assets/dish-placeholder.png" },

      // Premium extras
      { id:"lobster", name:"Lobster Pasta", cat:"Pasta", diet:["Premium"], time:"35 min", spice:"Mild", occasion:["Date night"], img:"assets/dish-placeholder.png" },
      { id:"wagyu", name:"Wagyu + truffle jus", cat:"Nordic", diet:["Premium"], time:"35 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"tuna", name:"Bluefin Tuna Bowl", cat:"Sushi", diet:["Premium"], time:"15 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"duck", name:"Duck + orange glaze", cat:"Nordic", diet:["Premium"], time:"35 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"truffleveg", name:"Truffle Veg Bowl", cat:"Veg", diet:["Veg","Premium"], time:"20 min", spice:"Mild", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"ramen", name:"Shoyu Ramen Kit", cat:"Sushi", diet:["Premium"], time:"30 min", spice:"Medium", occasion:["Dinner"], img:"assets/dish-placeholder.png" },
      { id:"burrata", name:"Burrata + tomato", cat:"Pasta", diet:["Premium"], time:"15 min", spice:"Mild", occasion:["Lunch"], img:"assets/dish-placeholder.png" },
      { id:"steakpepper", name:"Steak + pepper sauce", cat:"Nordic", diet:["Premium"], time:"30 min", spice:"Medium", occasion:["Dinner"], img:"assets/dish-placeholder.png" }
    ];

    // Placeholder image: om du inte har den ännu, skapa den filen i assets.
    // assets/dish-placeholder.png (en enkel transparent/neutral bild funkar)

    // =========================
    // Filters (chips + menu)
    // =========================
    const CHIP_FILTERS = [
      { key:"all", label:"Alla" },
      { key:"Pasta", label:"Pasta" },
      { key:"Nordic", label:"Nordic" },
      { key:"Sushi", label:"Sushi" },
      { key:"Veg", label:"Veg" },
      { key:"Premium", label:"Premium" },
      { key:"15 min", label:"15 min" },
      { key:"Date night", label:"Date night" },
      { key:"Spicy", label:"Spicy" }
    ];

    const MENU = {
      cats: ["Alla","Pasta","Nordic","Sushi","Veg","Premium"],
      diet: ["Classic","Veg","Premium","Spicy"],
      occasion: ["Lunch","Dinner","Date night","Family"],
      time: ["15 min","20 min","25 min","30 min","35 min","40 min"],
      spice: ["Mild","Medium","Hot"],
      sort: ["Featured","Newest","A–Z"]
    };

    let state = {
      chip: "all",
      cat: "Alla",
      diet: null,
      occasion: null,
      time: null,
      spice: null,
      sort: "Featured"
    };

    // =========================
    // Cart
    // =========================
    const CART_KEY = "bap_cart_v2";
    function getCart(){
      try { return JSON.parse(localStorage.getItem(CART_KEY) || "[]"); }
      catch { return []; }
    }
    function setCart(items){
      localStorage.setItem(CART_KEY, JSON.stringify(items));
      renderBagBadge();
    }
    function renderBagBadge(){
      const n = getCart().length;
      const el = document.getElementById("bagCount");
      el.style.display = n ? "inline-flex" : "none";
      el.textContent = n;
    }
    renderBagBadge();

    // =========================
    // Render chips
    // =========================
    const chipRow = document.getElementById("chipRow");
    function renderChips(){
      chipRow.innerHTML = "";
      CHIP_FILTERS.forEach(f => {
        const b = document.createElement("div");
        b.className = "chip" + (state.chip === f.key ? " active" : "");
        b.textContent = f.label;
        b.onclick = () => { state.chip = f.key; applyAndRender(); };
        chipRow.appendChild(b);
      });
    }

    // =========================
    // Menu options
    // =========================
    function mkOpt(text, active, onClick){
      const el = document.createElement("div");
      el.className = "opt" + (active ? " active" : "");
      el.textContent = text;
      el.onclick = onClick;
      return el;
    }

    function renderMenu(){
      const cats = document.getElementById("menuCats");
      const diet = document.getElementById("menuDiet");
      const occ = document.getElementById("menuOccasion");
      const time = document.getElementById("menuTime");
      const spice = document.getElementById("menuSpice");
      const sort = document.getElementById("menuSort");

      cats.innerHTML = "";
      MENU.cats.forEach(v => cats.appendChild(mkOpt(v, state.cat === v, () => { state.cat = v; applyAndRender(); renderMenu(); })));

      diet.innerHTML = "";
      MENU.diet.forEach(v => diet.appendChild(mkOpt(v, state.diet === v, () => { state.diet = (state.diet === v ? null : v); applyAndRender(); renderMenu(); })));

      occ.innerHTML = "";
      MENU.occasion.forEach(v => occ.appendChild(mkOpt(v, state.occasion === v, () => { state.occasion = (state.occasion === v ? null : v); applyAndRender(); renderMenu(); })));

      time.innerHTML = "";
      MENU.time.forEach(v => time.appendChild(mkOpt(v, state.time === v, () => { state.time = (state.time === v ? null : v); applyAndRender(); renderMenu(); })));

      spice.innerHTML = "";
      MENU.spice.forEach(v => spice.appendChild(mkOpt(v, state.spice === v, () => { state.spice = (state.spice === v ? null : v); applyAndRender(); renderMenu(); })));

      sort.innerHTML = "";
      MENU.sort.forEach(v => sort.appendChild(mkOpt(v, state.sort === v, () => { state.sort = v; applyAndRender(); renderMenu(); })));
    }

    // =========================
    // Filtering logic
    // =========================
    function matchChip(d){
      if(state.chip === "all") return true;
      if(state.chip === "Premium") return (d.diet || []).includes("Premium");
      if(state.chip === "Spicy") return (d.diet || []).includes("Spicy") || d.spice === "Hot";
      if(state.chip === "15 min") return d.time === "15 min";
      if(state.chip === "Date night") return (d.occasion || []).includes("Date night");
      // category chips
      return d.cat === state.chip;
    }

    function matchMenu(d){
      if(state.cat && state.cat !== "Alla"){
        if(state.cat === "Premium"){
          if(!(d.diet || []).includes("Premium")) return false;
        } else {
          if(d.cat !== state.cat) return false;
        }
      }
      if(state.diet && !((d.diet || []).includes(state.diet))) return false;
      if(state.occasion && !((d.occasion || []).includes(state.occasion))) return false;
      if(state.time && d.time !== state.time) return false;
      if(state.spice && d.spice !== state.spice) return false;
      return true;
    }

    function applySort(list){
      const out = list.slice();
      if(state.sort === "A–Z"){
        out.sort((a,b) => a.name.localeCompare(b.name, "sv"));
      }
      if(state.sort === "Newest"){
        // ingen riktig datumdata ännu, men vi gör tvärtom på id så det känns "nytt"
        out.sort((a,b) => (b.id).localeCompare(a.id));
      }
      return out;
    }

    function getVisible(){
      const filtered = DISHES
        .filter(matchChip)
        .filter(matchMenu);
      return applySort(filtered);
    }

    // =========================
    // Render grid
    // =========================
    const grid = document.getElementById("grid");
    const countLine = document.getElementById("countLine");

    function renderGrid(){
      const list = getVisible();
      countLine.textContent = `${list.length} rätter`;
      grid.innerHTML = "";

      list.forEach(d => {
        const el = document.createElement("div");
        el.className = "card";
        el.innerHTML = `
          <div class="cardMedia">
            <img class="dishImg" src="${d.img}" alt="">
          </div>
          <div class="cardBottom">
            <p class="cat">${d.cat}</p>
            <p class="name">${d.name}</p>
            <div class="meta">
              <span>${d.time}</span>
              <span class="dot">•</span>
              <span>${d.spice}</span>
              ${(d.diet||[]).includes("Premium") ? `<span class="dot">•</span><span>Premium</span>` : ``}
            </div>
          </div>
        `;

        el.onclick = () => {
          window.location.href = `dish.html?id=${encodeURIComponent(d.id)}`;
        };

        const im = el.querySelector("img");
        im.onerror = () => {
          im.style.display = "none";
        };

        grid.appendChild(el);
      });
    }

    // =========================
    // Search overlay – LV grid
    // =========================
    const searchOverlay = document.getElementById("searchOverlay");
    const q = document.getElementById("q");
    const searchGrid = document.getElementById("searchGrid");
    const searchCount = document.getElementById("searchCount");

    function openOverlay(el){ el.classList.add("open"); el.setAttribute("aria-hidden","false"); }
    function closeOverlay(el){ el.classList.remove("open"); el.setAttribute("aria-hidden","true"); }

    function renderSearch(text){
      const v = (text || "").trim().toLowerCase();
      const list = DISHES.filter(d => {
        if(!v) return true;
        const hay = [
          d.name, d.cat, d.time, d.spice,
          ...(d.diet||[]),
          ...(d.occasion||[])
        ].join(" ").toLowerCase();
        return hay.includes(v);
      });

      searchCount.textContent = `${list.length} results`;
      searchGrid.innerHTML = "";

      list.slice(0, 40).forEach(d => {
        const el = document.createElement("div");
        el.className = "sCard";
        el.innerHTML = `
          <div class="sMedia">
            <img class="sImg" src="${d.img}" alt="">
          </div>
          <div class="sBottom">
            <p class="sName">${d.name}</p>
            <p class="sMeta">${d.cat} · ${d.time}</p>
          </div>
        `;
        el.onclick = () => { window.location.href = `dish.html?id=${encodeURIComponent(d.id)}`; };

        const im = el.querySelector("img");
        im.onerror = () => { im.style.display = "none"; };

        searchGrid.appendChild(el);
      });
    }

    document.getElementById("searchBtn").onclick = () => {
      openOverlay(searchOverlay);
      q.value = "";
      renderSearch("");
      setTimeout(() => q.focus(), 50);
    };
    document.getElementById("searchClose").onclick = () => closeOverlay(searchOverlay);

    // trending tags
    document.querySelectorAll(".trend").forEach(t => {
      t.addEventListener("click", () => {
        const val = t.getAttribute("data-q") || "";
        q.value = val;
        renderSearch(val);
        q.focus();
      });
    });

    q.addEventListener("input", () => renderSearch(q.value));

    // ESC to close
    document.addEventListener("keydown", (e) => {
      if(e.key === "Escape"){
        closeOverlay(searchOverlay);
        closeOverlay(menuOverlay);
        closeOverlay(bagOverlay);
      }
    });

    // =========================
    // Menu drawer
    // =========================
    const menuOverlay = document.getElementById("menuOverlay");
    document.getElementById("menuBtn").onclick = () => openOverlay(menuOverlay);
    document.getElementById("menuClose").onclick = () => closeOverlay(menuOverlay);
    menuOverlay.addEventListener("click", (e) => { if(e.target === menuOverlay) closeOverlay(menuOverlay); });

    // =========================
    // Bag overlay
    // =========================
    const bagOverlay = document.getElementById("bagOverlay");
    const bagList = document.getElementById("bagList");
    const bagEmpty = document.getElementById("bagEmpty");

    function renderBag(){
      const cart = getCart();
      bagEmpty.style.display = cart.length ? "none" : "block";
      bagList.innerHTML = "";

      cart.forEach((it, idx) => {
        const row = document.createElement("div");
        row.className = "rowItem";
        row.innerHTML = `
          <div class="thumb"><img src="${it.img || "assets/dish-placeholder.png"}" alt=""></div>
          <div style="flex:1">
            <b>${it.name}</b><br/>
            <span>${it.pack || "Ej vald"}</span>
          </div>
          <button class="x" type="button" aria-label="Remove">✕</button>
        `;

        row.addEventListener("click", (e) => {
          if(e.target.tagName.toLowerCase() === "button") return;
          window.location.href = `dish.html?id=${encodeURIComponent(it.id)}`;
        });

        row.querySelector("button").addEventListener("click", () => {
          const next = getCart().filter((_, i) => i !== idx);
          setCart(next);
          renderBag();
        });

        const im = row.querySelector("img");
        im.onerror = () => { im.style.display = "none"; };

        bagList.appendChild(row);
      });

      renderBagBadge();
    }

    document.getElementById("bagBtn").onclick = () => { renderBag(); openOverlay(bagOverlay); };
    document.getElementById("bagClose").onclick = () => closeOverlay(bagOverlay);
    bagOverlay.addEventListener("click", (e) => { if(e.target === bagOverlay) closeOverlay(bagOverlay); });

    // =========================
    // Login
    // =========================
    document.getElementById("loginBtn").onclick = () => { window.location.href = "login.html"; };

    // =========================
    // Hero actions
    // =========================
    document.getElementById("scrollToDishes").onclick = () => {
      document.getElementById("dishesTop").scrollIntoView({behavior:"smooth", block:"start"});
    };
    document.getElementById("openSearchFromHero").onclick = () => {
      openOverlay(searchOverlay);
      q.value = "";
      renderSearch("");
      setTimeout(() => q.focus(), 50);
    };

    // =========================
    // Apply & render
    // =========================
    function applyAndRender(){
      renderChips();
      renderGrid();
    }

    // Start
    renderChips();
    renderMenu();
    renderGrid();
  </script>
</body>
</html>
